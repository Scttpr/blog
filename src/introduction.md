# Introduction

> Notes I prefer to save here to help my outstanding memory, [source repository](https://gitlab.com/Scttpr/blog)


These pages are generated by [mdBook](https://github.com/rust-lang/mdBook) and automatically deployed thanks to [Gitlab Pages](https://docs.gitlab.com/ee/user/project/pages/).

## Current setup

> mdBook is a utility to create modern online books from Markdown files.

There are multiple ways to install mdBook. I choose to use [Cargo](https://doc.rust-lang.org/cargo/), the main package manager for Rust crates. Thus be sure [Rust](https://rustup.rs/) is installed with Cargo. 

In the terminal, once cargo is added to `$PATH` :
```zsh
cargo install mdbook
```

To initialize the project, in your terminal :
```zsh
mdbook init
```

This generates this directory where book contains the built static files :
```zsh
book-test/
├── book
└── src
    ├── chapter_1.md
    └── SUMMARY.md
```

## Gitlab CI/CD

Gitlab Pages allow you to host static websites for free. Domain is define as such : `$USERNAME.gitlab.io/$PROJECT_NAME`

The only thing to do is to add a `.gitlab-ci.yml` file in the project's root folder :

```yml
# Load Rust docker image to have cargo installed
image: "rust:latest"

# A single job that includes the build and deploy
pages:
  stage: deploy
  script:
    # Display Rust and Cargo current version for debugging
    - rustc --version && cargo --version
    # Here we specify mdbook version and disable default feature to speed up compile time
    - cargo install mdbook --no-default-features --features output --vers "^0.1.0" 
    - mdbook build
    # Create public dir to store static files and copy book's content in it
    - mkdir public
    - cp -r book/. public/.
  artifacts:
    paths:
      - public
  only:
    - master
```






